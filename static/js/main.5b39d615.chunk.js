(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,n){e.exports=n(65)},47:function(e,t,n){},57:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(9),r=n.n(i),c=(n(47),n(10)),s=n(11),l=n(16),u=n(12),d=n(15),m=n(2),p=n(21),h=["user-top-read","user-read-currently-playing","user-read-playback-state"],g=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}return e},{});window.location.hash="",console.log("checking hash",g);var b=g,f=n(14),y=n(24),v=n.n(y),O=n(31),k={recommendation:[]},E=function(e,t){return function(){var n=Object(O.a)(v.a.mark(function n(a){return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.ajax({url:"https://api.spotify.com/v1/recommendations?market=US&seed_genres=".concat(e.genre,"&limit=10&target_instrumentalness=").concat(e.instrumentalness,"&target_dancebility=").concat(e.dancebility,"&target_valence=").concat(e.valence,"&target_energy=").concat(e.energy,"&seed_artists=").concat(e.artist),type:"GET",headers:{Authorization:"Bearer "+t},success:function(e){return console.log("REDUX are there recommendations i?",e),a({type:"GET_RECOMMENDATION",spotifyData:e.tracks})}});case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_RECOMMENDATION":return{recommendation:t.spotifyData};default:return e}},S=[{id:1,question:"You're feeling rather...",type:"valence",valueOne:.7,valueTwo:.3,endOfQuiz:!1,imageOne:"https://cdn.dribbble.com/users/1056629/screenshots/3220439/unicorn.gif",imageTwo:"https://media2.giphy.com/media/8boMf1VXVHoJy/giphy.gif?cid=790b76115cc5eca3714d636f41d299e7&rid=giphy.gif"},{id:2,question:"Just pick one.",type:"instrumentalness",valueOne:.7,valueTwo:.3,endOfQuiz:!1,imageOne:"https://media2.giphy.com/media/1wXbeoh28PW8v9ANDN/source.gif",imageTwo:"https://i.redd.it/19agtq4u3ol11.gif"},{id:3,question:"Dance party or staycation?",type:"dancebility",valueOne:.7,valueTwo:.3,endOfQuiz:!1,imageOne:"https://cdn.dribbble.com/users/641727/screenshots/5120590/flossdance_800.gif",imageTwo:"https://cdn.dribbble.com/users/1466186/screenshots/5020146/homealone.gif"},{id:4,question:"Your spirit animal?",type:"energy",valueOne:.7,valueTwo:.3,endOfQuiz:!1,imageOne:"https://cdn.dribbble.com/users/428994/screenshots/4039934/party_dribbble.gif",imageTwo:"https://cdn.dribbble.com/users/470545/screenshots/2736749/800_x_600.gif"},{id:5,question:"Pick a vibe.",type:"genre",valueOne:"acoustic%2Cambient",valueTwo:"pop%2Chip_hop",endOfQuiz:!1,imageOne:"https://cdn.dribbble.com/users/92827/screenshots/2535570/intruder1.gif",imageTwo:"https://cdn.dribbble.com/users/1473989/screenshots/3891988/california_love_v02_001_compressed.gif"},{id:6,question:"Who would you hang out with?",type:"artist",valueOne:"6eUKZXaKkcviH0Ku9w2n3V",valueTwo:"6vWDO969PvNqNYHIOW5v0m",endOfQuiz:!0,imageOne:"https://media.giphy.com/media/10U2e8PTL3sc8M/giphy.gif",imageTwo:"http://legacy.blavity.com/wp-content/uploads/2016/03/bey-wave.gif"}],_=n(32),j=n.n(_),T=(n(54),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={valence:null,energy:null,dancebility:null,instrumentalness:null,artist:null,genre:"",endOfQuiz:!1,spotifyData:[],currentQuestion:0,percentage:17},e.handleSubmit=e.handleSubmit.bind(Object(m.a)(Object(m.a)(e))),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){console.log("is state updated?",this.props),this.props.getRecommendation(this.state,b.access_token),this.props.history.push("/recommendation")}},{key:"render",value:function(){var e=this,t=S[this.state.currentQuestion],n=t.type,a=t.endOfQuiz?{endOfQuiz:t.endOfQuiz,percentage:100}:{endOfQuiz:t.endOfQuiz,currentQuestion:this.state.currentQuestion+1,percentage:this.state.percentage+17},i=Object.assign({},a);return a[n]=t.valueOne,i[n]=t.valueTwo,console.log("checking state",this.state),o.a.createElement("div",null,o.a.createElement("div",{className:"quiz-question-container"},t.question,!this.state.endOfQuiz&&o.a.createElement(j.a,{className:"progress-bar",percentage:this.state.percentage,text:"Q ".concat(t.id," of 6"),background:!0,backgroundPadding:0,styles:{background:{fill:"transparent"},text:{fill:"#1ecd97",fontSize:"16px"},path:{stroke:"#1ecd97"},trail:{stroke:"transparent"}}}),this.state.endOfQuiz?o.a.createElement("div",{className:"submit-playlist"},o.a.createElement("img",{id:"generate-playlist",type:"submit",src:"https://thumbs.gfycat.com/HeftyAncientCaimanlizard-max-1mb.gif",border:"0",value:"generate-playlist",alt:"submit"}),o.a.createElement("p",{onClick:function(){return e.handleSubmit()}},"Generate Playlist")):null),o.a.createElement("div",{className:"quiz-container"},o.a.createElement("img",{src:t.imageOne,alt:"",onClick:function(){return e.setState(a)}}),o.a.createElement("img",{src:t.imageTwo,alt:"",onClick:function(){return e.setState(i)}})))}}]),t}(o.a.Component));var z=Object(f.b)(null,function(e){return{getRecommendation:function(t,n){return e(E(t,n))}}})(T),N=n(33),L=n.n(N),Q=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleLoadSuccess=n.handleLoadSuccess.bind(Object(m.a)(Object(m.a)(n))),n.handleLoadFailure=n.handleLoadSuccess.bind(Object(m.a)(Object(m.a)(n))),n.cb=n.cb.bind(Object(m.a)(Object(m.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.onSpotifyWebPlaybackSDKReady=function(){e.handleLoadSuccess()}}},{key:"handleLoadSuccess",value:function(){this.setState({scriptLoaded:!0}),console.log("Script loaded");var e=b.access_token,t=new window.Spotify.Player({name:"Web Playback SDK Quick Start Player",getOAuthToken:function(t){t(e)}});console.log(t),t.addListener("initialization_error",function(e){var t=e.message;console.error(t)}),t.addListener("authentication_error",function(e){var t=e.message;console.error(t)}),t.addListener("account_error",function(e){var t=e.message;console.error(t)}),t.addListener("playback_error",function(e){var t=e.message;console.error(t)}),t.addListener("player_state_changed",function(e){console.log(e)}),t.addListener("ready",function(e){var n=e.device_id;console.log("Ready with Device ID",n);!function(e){var t=e.spotify_uri,n=e.playerInstance._options,a=n.getOAuthToken,o=n.id;a(function(e){fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(o),{method:"PUT",body:JSON.stringify({uris:[t]}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})})}({playerInstance:t,spotify_uri:"spotify:track:7xGfFoTpQ2E7fRF5lN10tr"})}),t.addListener("not_ready",function(e){var t=e.device_id;console.log("Device ID has gone offline",t)}),t.connect()}},{key:"cb",value:function(e){return e}},{key:"handleScriptCreate",value:function(){this.setState({scriptLoaded:!1}),console.log("Script created")}},{key:"handleScriptError",value:function(){this.setState({scriptError:!0}),console.log("Script error")}},{key:"handleScriptLoad",value:function(){this.setState({scriptLoaded:!0}),console.log("Script loaded")}},{key:"render",value:function(){var e=this.props.recommendation||[];return console.log(this.props),o.a.createElement("div",{className:"playlist"},o.a.createElement(L.a,{url:"https://sdk.scdn.co/spotify-player.js",onCreate:this.handleScriptCreate.bind(this),onError:this.handleScriptError.bind(this),onLoad:this.handleScriptLoad.bind(this)}),o.a.createElement("tbody",null,o.a.createElement("tr",{className:"playlist-header"},o.a.createElement("td",null,"Song"),o.a.createElement("td",null,"Artist"),o.a.createElement("td",null,"Album")),e.map(function(e){return o.a.createElement("tr",{key:e.name,className:"song-list"},o.a.createElement("td",null,o.a.createElement("a",{href:e.external_urls.spotify},e.name)),o.a.createElement("td",null,e.artists[0].name),o.a.createElement("td",null,e.album.name))})),o.a.createElement("a",{id:"login-spotify",className:"btn btn--login",href:"http://localhost:3000/#/"},"Play Again"))}}]),t}(o.a.Component),D=Object(f.b)(function(e){return{recommendation:e.recommendation}},null)(Q),C=(n(57),n(22)),x=n(8),q=n(34),A=n.n(q),R=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={token:null,recommendation:[]},e.getRecommendation=e.getRecommendation.bind(Object(m.a)(Object(m.a)(e))),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=b.access_token;e&&this.setState({token:e})}},{key:"getRecommendation",value:function(e,t){var n=this;console.log("was getRec ever called????"),p.ajax({url:"https://api.spotify.com/v1/recommendations?market=ES&seed_genres=".concat(t.genre,"&limit=10"),type:"GET",headers:{Authorization:"Bearer "+e},success:function(e){console.log("are there recommendations?",e),n.setState({recommendation:e.tdracks})}})}},{key:"render",value:function(){return console.log("checking state",this.state),o.a.createElement(C.a,null,o.a.createElement("body",{className:"App-body"},this.state.token?null:o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"login-cover-photo"},o.a.createElement("img",{src:"https://cdn.dribbble.com/users/722246/screenshots/2989548/dribbble.gif",alt:""})),o.a.createElement("div",{className:"login-page-container"},o.a.createElement("div",{className:"login-intro"},o.a.createElement(A.a,{strings:["Take a quiz to create your personalized playlist"],typeSpeed:40})),o.a.createElement("a",{id:"login-spotify",className:"btn btn--login",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("62b5875d21e54e2994a7af1e114b38b5","&redirect_uri=").concat("http://localhost:3000/","&scope=").concat(h.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify"))),this.state.token&&o.a.createElement(a.Fragment,null,o.a.createElement(x.a,{exact:!0,path:"/",component:z}),o.a.createElement(x.a,{exact:!0,path:"/recommendation",component:D}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=n(13),I=n(38),M=n(39),W=n.n(M),G=n(40),U=Object(P.createStore)(w,Object(I.composeWithDevTools)(Object(P.applyMiddleware)(G.a,W.a)));r.a.render(o.a.createElement(f.a,{store:U},o.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[42,1,2]]]);
//# sourceMappingURL=main.5b39d615.chunk.js.map